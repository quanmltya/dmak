!function(){"use strict";var i=function(t,e){if(this.text=t,this.options=function t(e,o){if(2!==arguments.length)throw new Error("Missing arguments in assign function");for(var r in e)o.hasOwnProperty(r)&&(e[r]="object"==typeof o[r]?t(e[r],o[r]):o[r]);return e}(function t(e){if(null===e||"object"!=typeof e)return e;var o=e.constructor();for(var r in e)o[r]=t(e[r]);return o}(i.default),e),this.strokes=[],this.papers=[],this.pointer=0,this.timeouts={play:[],erasing:[],drawing:[]},!this.options.skipLoad){var o;this.options.escapedData?(o=new DmakLoader).setData(unescape(escapedData)):o=new DmakLoader(this.options.uri);var r=this;o.load(t,function(t){r.prepare(t),r.options.loaded(r.strokes),r.options.autoplay&&r.render()})}};function e(t,e,o){null!==t.object.text&&t.object.text.remove();var r=function(){t.object.path.remove(),t.object={path:null,text:null},e.shift()};o.stroke.animated.erasing?(t.object.path.node.style.stroke=o.stroke.attr.active,e.push(h(t,-1,o,r))):r()}function h(t,e,o,r){return t.object.path.attr({stroke:o.stroke.attr.active}),t.object.path.node.style.transition=t.object.path.node.style.WebkitTransition="none",t.object.path.node.style.strokeDasharray=t.length+" "+t.length,t.object.path.node.style.strokeDashoffset=0<e?t.length:0,t.object.path.node.getBoundingClientRect(),t.object.path.node.style.transition=t.object.path.node.style.WebkitTransition="stroke-dashoffset "+t.duration+"ms ease",t.object.path.node.style.strokeDashoffset=0<e?"0":t.length,setTimeout(r,t.duration)}i.VERSION="0.2.0",i.default={escapedData:null,uri:"",skipLoad:!1,autoplay:!0,height:109,width:109,viewBox:{x:0,y:0,w:109,h:109},step:.03,element:"draw",stroke:{animated:{drawing:!0,erasing:!0},order:{visible:!1,attr:{"font-size":"8",fill:"#999999"}},attr:{active:"#BF0000",stroke:"#2C2C2C","stroke-width":4,"stroke-linecap":"round","stroke-linejoin":"round"}},grid:{show:!0,attr:{stroke:"#CCCCCC","stroke-width":.5,"stroke-dasharray":"--"}},loaded:function(){},erased:function(){},drew:function(){}},i.fn=i.prototype={prepare:function(t){this.strokes=function(t,e){var o,r,i,s,n=[];for(i=0;i<t.length;i++)for(s=0;s<t[i].length;s++)r=Raphael.getTotalLength(t[i][s].path),o={char:i,length:r,duration:r*e.step*1e3,path:t[i][s].path,groups:t[i][s].groups,text:t[i][s].text,object:{path:null,text:null}},n.push(o);return n}(t,this.options),this.papers=function(t,e){var o,r,i=[];for(r=0;r<t;r++)(o=new Raphael(e.element,e.width+"px",e.height+"px")).setViewBox(e.viewBox.x,e.viewBox.y,e.viewBox.w,e.viewBox.h),o.canvas.setAttribute("class","dmak-svg"),i.push(o);return i.reverse()}(t.length,this.options),this.options.grid.show&&function(t,e){var o;for(o=0;o<t.length;o++)t[o].path("M"+e.viewBox.w/2+",0 L"+e.viewBox.w/2+","+e.viewBox.h).attr(e.grid.attr),t[o].path("M0,"+e.viewBox.h/2+" L"+e.viewBox.w+","+e.viewBox.h/2).attr(e.grid.attr)}(this.papers,this.options)},erase:function(t){if(this.timeouts.play.length)return!1;if(this.pointer<=0)return!1;for(void 0===t&&(t=0);this.pointer--,e(this.strokes[this.pointer],this.timeouts.erasing,this.options),this.options.erased(this.pointer),this.pointer>t;);},render:function(t){if(this.timeouts.play.length)return!1;if(void 0===t)t=this.strokes.length;else if(t>this.strokes.length)return!1;var e,o=function(t){!function(t,e,o,r){var i=function(){if(null!==e.object.path){var t=r.stroke.attr.stroke;"random"===r.stroke.attr.stroke&&(t=Raphael.getColor()),e.object.path.node.style.stroke=t,e.object.path.node.style.transition=e.object.path.node.style.WebkitTransition="stroke 400ms ease",o.shift()}};e.object.path=t.path(e.path),e.object.path.attr(r.stroke.attr),r.stroke.order.visible&&(s=t,a=r,(n=e).object.text=s.text(n.text.x,n.text.y,n.text.value),n.object.text.attr(a.stroke.order.attr));var s,n,a;r.stroke.animated.drawing?h(e,1,r,i):i()}(t.papers[t.strokes[t.pointer].char],t.strokes[t.pointer],t.timeouts.drawing,t.options),t.options.drew(t.pointer),t.pointer++,t.timeouts.play.shift()},r=0;for(e=0;e<this.timeouts.erasing.length;e++)window.clearTimeout(this.timeouts.erasing[e]),this.timeouts.erasing=[];for(e=this.pointer;e<t;e++)!this.options.stroke.animated.drawing||r<=0?o(this):this.timeouts.play.push(setTimeout(o,r,this)),r+=this.strokes[e].duration},pause:function(){for(var t=0;t<this.timeouts.play.length;t++)window.clearTimeout(this.timeouts.play[t]);this.timeouts.play=[]},eraseLastStrokes:function(t){this.erase(this.pointer-t)},renderNextStrokes:function(t){this.render(this.pointer+t)}},window.Dmak=i}(),function(){"use strict";var t=function(t){this.uri=t};function p(t,e,o,r){var i=new XMLHttpRequest,s=("00000"+o).slice(-5);"00020"!==s&&"03000"!==s?(i.open("GET",t+s+".svg",!0),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?r.done(e,u(i.response,s)):r.error(i.statusText))},i.send()):r.done(e,{paths:[],texts:[]})}function u(t,e){var o,i=[],r=(new DOMParser).parseFromString(t,"application/xml"),s=r.querySelectorAll("text"),n=[];for(function t(e){var o,r=e.childNodes;for(o=0;o<r.length;o++)"g"===r[o].tagName?(n.push(r[o].getAttribute("id")),t(r[o]),n.splice(n.indexOf(r[o].getAttribute("id")),1)):"path"===r[o].tagName&&i.push({path:r[o].getAttribute("d"),groups:n.slice(0)})}(r.getElementById("kvg:"+e)),o=0;o<s.length;o++)i[o].text={value:s[o].textContent,x:s[o].getAttribute("transform").split(" ")[4],y:s[o].getAttribute("transform").split(" ")[5].replace(")","")};return i}t.prototype.load=function(t,o){var e,r,i,s=[],n=t.length,a=0,h={done:function(t,e){s[t]=e,++a===n&&o(s)},error:function(t){console.log("Error",t)}};for(e=0;e<n;e++)this.data?(r=this.uri,i=e,t.charCodeAt(e).toString(16),h,callbacks.done(i,u(r,code))):p(this.uri,e,t.charCodeAt(e).toString(16),h)},window.DmakLoader=t}();