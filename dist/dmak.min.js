!function(){"use strict";var n=function(t,e){if(this.text=t,this.options=function t(e,o){if(2!==arguments.length)throw new Error("Missing arguments in assign function");for(var i in e)o.hasOwnProperty(i)&&("object"!=typeof o[i]||Array.isArray(o[i])?e[i]=o[i]:e[i]=t(e[i],o[i]));return e}(function t(e){if(null===e||"object"!=typeof e)return e;var o=e.constructor();for(var i in e)o[i]=t(e[i]);return o}(n.default),e),this.strokes=[],this.papers=[],this.pointer=0,this.timeouts={play:[],erasing:[],drawing:[]},!this.options.skipLoad){var o;if(0<this.options.escapedData.length){o=new DmakLoader;for(var i=[],r=0;r<this.options.escapedData.length;r++)i[i.length]=unescape(this.options.escapedData[r]);o.setData(i)}else o=new DmakLoader(this.options.uri);var s=this;o.load(t,function(t){s.prepare(t),s.options.loaded(s.strokes),s.options.autoplay&&s.render()})}};function e(t,e,o){null!==t.object.text&&t.object.text.remove();var i=function(){t.object.path.remove(),t.object={path:null,text:null},e.shift()};o.stroke.animated.erasing?(t.object.path.node.style.stroke=o.stroke.attr.active,e.push(h(t,-1,o,i))):i()}function h(t,e,o,i){return t.object.path.attr({stroke:o.stroke.attr.active}),t.object.path.node.style.transition=t.object.path.node.style.WebkitTransition="none",t.object.path.node.style.strokeDasharray=t.length+" "+t.length,t.object.path.node.style.strokeDashoffset=0<e?t.length:0,t.object.path.node.getBoundingClientRect(),t.object.path.node.style.transition=t.object.path.node.style.WebkitTransition="stroke-dashoffset "+t.duration+"ms ease",t.object.path.node.style.strokeDashoffset=0<e?"0":t.length,setTimeout(i,t.duration)}n.VERSION="0.2.0",n.default={escapedData:[],uri:"",skipLoad:!1,autoplay:!0,height:109,width:109,viewBox:{x:0,y:0,w:109,h:109},step:.03,element:"draw",stroke:{animated:{drawing:!0,erasing:!0},order:{visible:!1,attr:{"font-size":"8",fill:"#999999"}},attr:{active:"#BF0000",stroke:"#2C2C2C","stroke-width":4,"stroke-linecap":"round","stroke-linejoin":"round"}},grid:{show:!0,attr:{stroke:"#CCCCCC","stroke-width":.5,"stroke-dasharray":"--"}},loaded:function(){},erased:function(){},drew:function(){}},n.fn=n.prototype={prepare:function(t){this.strokes=function(t,e){var o,i,r,s,n=[];for(r=0;r<t.length;r++)for(s=0;s<t[r].length;s++)i=Raphael.getTotalLength(t[r][s].path),o={char:r,length:i,duration:i*e.step*1e3,path:t[r][s].path,groups:t[r][s].groups,text:t[r][s].text,object:{path:null,text:null}},n.push(o);return n}(t,this.options),this.papers=function(t,e){var o,i,r=[];for(i=0;i<t;i++)(o=new Raphael(e.element,e.width+"px",e.height+"px")).setViewBox(e.viewBox.x,e.viewBox.y,e.viewBox.w,e.viewBox.h),o.canvas.setAttribute("class","dmak-svg"),r.push(o);return r.reverse()}(t.length,this.options),this.options.grid.show&&function(t,e){var o;for(o=0;o<t.length;o++)t[o].path("M"+e.viewBox.w/2+",0 L"+e.viewBox.w/2+","+e.viewBox.h).attr(e.grid.attr),t[o].path("M0,"+e.viewBox.h/2+" L"+e.viewBox.w+","+e.viewBox.h/2).attr(e.grid.attr)}(this.papers,this.options)},erase:function(t){if(this.timeouts.play.length)return!1;if(this.pointer<=0)return!1;for(void 0===t&&(t=0);this.pointer--,e(this.strokes[this.pointer],this.timeouts.erasing,this.options),this.options.erased(this.pointer),this.pointer>t;);},render:function(t){if(this.timeouts.play.length)return!1;if(void 0===t)t=this.strokes.length;else if(t>this.strokes.length)return!1;var e,o=function(t){!function(t,e,o,i){var r=function(){if(null!==e.object.path){var t=i.stroke.attr.stroke;"random"===i.stroke.attr.stroke&&(t=Raphael.getColor()),e.object.path.node.style.stroke=t,e.object.path.node.style.transition=e.object.path.node.style.WebkitTransition="stroke 400ms ease",o.shift()}};e.object.path=t.path(e.path),e.object.path.attr(i.stroke.attr),i.stroke.order.visible&&(s=t,a=i,(n=e).object.text=s.text(n.text.x,n.text.y,n.text.value),n.object.text.attr(a.stroke.order.attr));var s,n,a;i.stroke.animated.drawing?h(e,1,i,r):r()}(t.papers[t.strokes[t.pointer].char],t.strokes[t.pointer],t.timeouts.drawing,t.options),t.options.drew(t.pointer),t.pointer++,t.timeouts.play.shift()},i=0;for(e=0;e<this.timeouts.erasing.length;e++)window.clearTimeout(this.timeouts.erasing[e]),this.timeouts.erasing=[];for(e=this.pointer;e<t;e++)!this.options.stroke.animated.drawing||i<=0?o(this):this.timeouts.play.push(setTimeout(o,i,this)),i+=this.strokes[e].duration},pause:function(){for(var t=0;t<this.timeouts.play.length;t++)window.clearTimeout(this.timeouts.play[t]);this.timeouts.play=[]},eraseLastStrokes:function(t){this.erase(this.pointer-t)},renderNextStrokes:function(t){this.render(this.pointer+t)}},window.Dmak=n}(),function(){"use strict";var t=function(t){this.uri=t};function a(t,e,o,i){var r=new XMLHttpRequest,s=("00000"+o).slice(-5);"00020"!==s&&"03000"!==s?(r.open("GET",t+s+".svg",!0),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?i.done(e,n(r.response,s)):i.error(r.statusText))},r.send()):i.done(e,{paths:[],texts:[]})}function h(t,e,o,i){var r=("00000"+o).slice(-5),s=[];try{s=n(t[e],r)}catch(t){}i.done(e,s)}function n(t,e){var o,r=[],i=(new DOMParser).parseFromString(t,"application/xml"),s=i.querySelectorAll("text"),n=[];for(function t(e){var o,i=e.childNodes;for(o=0;o<i.length;o++)"g"===i[o].tagName?(n.push(i[o].getAttribute("id")),t(i[o]),n.splice(n.indexOf(i[o].getAttribute("id")),1)):"path"===i[o].tagName&&r.push({path:i[o].getAttribute("d"),groups:n.slice(0)})}(i.getElementById("kvg:"+e)),o=0;o<s.length;o++)r[o].text={value:s[o].textContent,x:s[o].getAttribute("transform").split(" ")[4],y:s[o].getAttribute("transform").split(" ")[5].replace(")","")};return r}t.prototype.setData=function(t){this.data=t},t.prototype.load=function(t,o){var e,i=[],r=t.length,s=0,n={done:function(t,e){i[t]=e,++s===r&&o(i)},error:function(t){console.log("Error",t)}};for(e=0;e<r;e++)this.data?h(this.data,e,t.charCodeAt(e).toString(16),n):a(this.uri,e,t.charCodeAt(e).toString(16),n)},window.DmakLoader=t}();